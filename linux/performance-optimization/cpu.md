#平均负载

说明：平均负载是指单位时间内，系统处于可运行状态和不可中断状态的平均进程数，也就是平均活跃进程数，它和 CPU 使用率并没有直接关系。

可运行状态：是指正在使用 CPU 或者正在等待 CPU 的进程，ps命令看到处于R状态（runing或者Runnable）的进程。

不可以中断状态：正处于内核关键流程中的进程，并且这些流程是不可打断的，比如最常见的是等待硬件设备的I/O相应，也是就是我们在ps命令中看到的D状态（Uninterruptible Sleep，也成为Disk Sleep)的进程。磁盘度写数据时，为了保证数据的一致性，在得到磁盘回复前，它是不能被其他的进程或者中断打断的，这个时候程序就是处于不可中断状态，如果此时的进程被打断了，就很容易出现磁盘数据与进程数据不一致的问题。

不可中断状态实际上是系统对进程和硬件设备的一种保护机制。

所以，那么最理想的，就是平均负载等于cpu核数，每个进程运行在一个cpu核上。

查看cpu核数命令

`grep 'model name' /proc/cpuinfo | wc -l`


uptime 查看1 5 15分钟的平均负载，可以根据这三个值分析真个系统的负载变化情况。

当系统满载
大于70%时，应该查找原因，该值也只是个经验值,一旦负载过高，就有可能导致进程变慢。


#平均负载和cpu使用率

处于可运行状态和不可中断状态的进程，不仅仅包含了<font color="red">***正在使用cpu的*** 还包括等待cpu和等待IO的</font>

平均负载和cpu使用率不一定成对应关系。

* cpu密集型，
* I/O密集型
* 大量等待cpu的进程

Cpu使用最高的
dstat --top-cpu

iostat

mpstat 



cpu密集型进程：导致load 

#1、压力测试工具的安装
	
	下载命令

	`wget  http://people.seas.harvard.edu/~apw/stress/stress-1.0.4.tar.gz`


